var app=function(){"use strict";function t(){}function n(t,n){for(const e in n)t[e]=n[e];return t}function e(t){return t()}function i(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function a(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function s(n,...e){if(null==n)return t;const i=n.subscribe(...e);return i.unsubscribe?()=>i.unsubscribe():i}function c(t,n,e){t.$$.on_destroy.push(s(n,e))}function l(t,n,e,i){if(t){const o=u(t,n,e,i);return t[0](o)}}function u(t,e,i,o){return t[1]&&o?n(i.ctx.slice(),t[1](o(e))):i.ctx}function f(t,n,e,i,o,r,a){const s=function(t,n,e,i){if(t[2]&&i){const o=t[2](i(e));if(void 0===n.dirty)return o;if("object"==typeof o){const t=[],e=Math.max(n.dirty.length,o.length);for(let i=0;i<e;i+=1)t[i]=n.dirty[i]|o[i];return t}return n.dirty|o}return n.dirty}(n,i,o,r);if(s){const o=u(n,e,i,a);t.p(o,s)}}function d(t){const n={};for(const e in t)"$"!==e[0]&&(n[e]=t[e]);return n}function m(t,n,e=n){return t.set(e),n}function p(t,n){t.appendChild(n)}function h(t,n,e){t.insertBefore(n,e||null)}function _(t){t.parentNode.removeChild(t)}function v(t){return document.createElement(t)}function g(t){return document.createTextNode(t)}function $(){return g(" ")}function y(t,n,e,i){return t.addEventListener(n,e,i),()=>t.removeEventListener(n,e,i)}function w(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function b(t){return""===t?null:+t}function x(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}function E(t,n){t.value=null==n?"":n}let A,L;function T(){if(void 0===A){A=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){A=!0}}return A}function F(t){L=t}function I(){if(!L)throw new Error("Function called outside component initialization");return L}function S(t){I().$$.on_mount.push(t)}function M(t){I().$$.on_destroy.push(t)}function R(t,n){I().$$.context.set(t,n)}function O(t){return I().$$.context.get(t)}const N=[],D=[],P=[],G=[],C=Promise.resolve();let H=!1;function U(){H||(H=!0,C.then(k))}function z(t){P.push(t)}let B=!1;const Y=new Set;function k(){if(!B){B=!0;do{for(let t=0;t<N.length;t+=1){const n=N[t];F(n),q(n.$$)}for(F(null),N.length=0;D.length;)D.pop()();for(let t=0;t<P.length;t+=1){const n=P[t];Y.has(n)||(Y.add(n),n())}P.length=0}while(N.length);for(;G.length;)G.pop()();H=!1,B=!1,Y.clear()}}function q(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(z)}}const W=new Set;let X;function j(t,n){t&&t.i&&(W.delete(t),t.i(n))}function V(t,n,e,i){if(t&&t.o){if(W.has(t))return;W.add(t),X.c.push((()=>{W.delete(t),i&&(e&&t.d(1),i())})),t.o(n)}}function J(t){t&&t.c()}function K(t,n,i){const{fragment:a,on_mount:s,on_destroy:c,after_update:l}=t.$$;a&&a.m(n,i),z((()=>{const n=s.map(e).filter(r);c?c.push(...n):o(n),t.$$.on_mount=[]})),l.forEach(z)}function Q(t,n){const e=t.$$;null!==e.fragment&&(o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function Z(n,e,r,a,s,c,l=[-1]){const u=L;F(n);const f=e.props||{},d=n.$$={fragment:null,ctx:null,props:c,update:t,not_equal:s,bound:i(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:i(),dirty:l,skip_bound:!1};let m=!1;if(d.ctx=r?r(n,f,((t,e,...i)=>{const o=i.length?i[0]:e;return d.ctx&&s(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),m&&function(t,n){-1===t.$$.dirty[0]&&(N.push(t),U(),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}(n,t)),e})):[],d.update(),m=!0,o(d.before_update),d.fragment=!!a&&a(d.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);d.fragment&&d.fragment.l(t),t.forEach(_)}else d.fragment&&d.fragment.c();e.intro&&j(n.$$.fragment),K(n,e.target,e.anchor),k()}F(u)}class tt{$destroy(){Q(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const nt=[];function et(n,e=t){let i;const o=[];function r(t){if(a(n,t)&&(n=t,i)){const t=!nt.length;for(let t=0;t<o.length;t+=1){const e=o[t];e[1](),nt.push(e,n)}if(t){for(let t=0;t<nt.length;t+=2)nt[t][0](nt[t+1]);nt.length=0}}}return{set:r,update:function(t){r(t(n))},subscribe:function(a,s=t){const c=[a,s];return o.push(c),1===o.length&&(i=e(r)||t),a(n),()=>{const t=o.indexOf(c);-1!==t&&o.splice(t,1),0===o.length&&(i(),i=null)}}}}const it={},ot={},rt={};function at(){return O(it)}function st(){return O(rt)}function ct(t,n){const e=t.indexOf(n);~e&&function(t,n){t[n]=t[t.length-1],t.pop()}(t,e)}function lt(t,n){let e=0;const i=[],o=[],r=[],a={index:0,meshes:i,transparent_meshes:o,child_layers:r,needs_sort:!1,needs_transparency_sort:!0,add_mesh:(t,e)=>{e&&ct(t.transparent?i:o,t),t.transparent?(o.push(t),a.needs_transparency_sort=!0):i.push(t),M((()=>{ct(i,t),ct(o,t),n()}))},add_child:(t=e++)=>{const i=lt(t,n);return r.push(i),a.needs_sort=!0,M((()=>{ct(r,i),a.needs_sort=!0,n()})),i}};return a}function ut(t){if("number"==typeof t){return new Float32Array([((16711680&t)>>16)/255,((65280&t)>>8)/255,(255&t)/255])}return t}function ft(t,n=t){let e=0;for(let t=0;t<n.length;t+=1)e+=n[t]*n[t];const i=Math.sqrt(e);return t[0]=n[0]/i,t[1]=n[1]/i,t[2]=n[2]/i,t}function dt(t){const n=new Map;return(...e)=>{const i=JSON.stringify(e);return n.has(i)||n.set(i,t(...e)),n.get(i)}}var mt="undefined"!=typeof Float32Array?Float32Array:Array;function pt(){var t=new mt(16);return mt!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function ht(t,n){var e=n[0],i=n[1],o=n[2],r=n[3],a=n[4],s=n[5],c=n[6],l=n[7],u=n[8],f=n[9],d=n[10],m=n[11],p=n[12],h=n[13],_=n[14],v=n[15],g=e*s-i*a,$=e*c-o*a,y=e*l-r*a,w=i*c-o*s,b=i*l-r*s,x=o*l-r*c,E=u*h-f*p,A=u*_-d*p,L=u*v-m*p,T=f*_-d*h,F=f*v-m*h,I=d*v-m*_,S=g*I-$*F+y*T+w*L-b*A+x*E;return S?(S=1/S,t[0]=(s*I-c*F+l*T)*S,t[1]=(o*F-i*I-r*T)*S,t[2]=(h*x-_*b+v*w)*S,t[3]=(d*b-f*x-m*w)*S,t[4]=(c*L-a*I-l*A)*S,t[5]=(e*I-o*L+r*A)*S,t[6]=(_*y-p*x-v*$)*S,t[7]=(u*x-d*y+m*$)*S,t[8]=(a*F-s*L+l*E)*S,t[9]=(i*L-e*F-r*E)*S,t[10]=(p*b-h*y+v*g)*S,t[11]=(f*y-u*b-m*g)*S,t[12]=(s*A-a*T-c*E)*S,t[13]=(e*T-i*A+o*E)*S,t[14]=(h*$-p*w-_*g)*S,t[15]=(u*w-f*$+d*g)*S,t):null}function _t(t,n,e){var i=n[0],o=n[1],r=n[2],a=n[3],s=n[4],c=n[5],l=n[6],u=n[7],f=n[8],d=n[9],m=n[10],p=n[11],h=n[12],_=n[13],v=n[14],g=n[15],$=e[0],y=e[1],w=e[2],b=e[3];return t[0]=$*i+y*s+w*f+b*h,t[1]=$*o+y*c+w*d+b*_,t[2]=$*r+y*l+w*m+b*v,t[3]=$*a+y*u+w*p+b*g,$=e[4],y=e[5],w=e[6],b=e[7],t[4]=$*i+y*s+w*f+b*h,t[5]=$*o+y*c+w*d+b*_,t[6]=$*r+y*l+w*m+b*v,t[7]=$*a+y*u+w*p+b*g,$=e[8],y=e[9],w=e[10],b=e[11],t[8]=$*i+y*s+w*f+b*h,t[9]=$*o+y*c+w*d+b*_,t[10]=$*r+y*l+w*m+b*v,t[11]=$*a+y*u+w*p+b*g,$=e[12],y=e[13],w=e[14],b=e[15],t[12]=$*i+y*s+w*f+b*h,t[13]=$*o+y*c+w*d+b*_,t[14]=$*r+y*l+w*m+b*v,t[15]=$*a+y*u+w*p+b*g,t}function vt(t,n,e){var i,o,r,a,s,c,l,u,f,d,m,p,h=e[0],_=e[1],v=e[2];return n===t?(t[12]=n[0]*h+n[4]*_+n[8]*v+n[12],t[13]=n[1]*h+n[5]*_+n[9]*v+n[13],t[14]=n[2]*h+n[6]*_+n[10]*v+n[14],t[15]=n[3]*h+n[7]*_+n[11]*v+n[15]):(i=n[0],o=n[1],r=n[2],a=n[3],s=n[4],c=n[5],l=n[6],u=n[7],f=n[8],d=n[9],m=n[10],p=n[11],t[0]=i,t[1]=o,t[2]=r,t[3]=a,t[4]=s,t[5]=c,t[6]=l,t[7]=u,t[8]=f,t[9]=d,t[10]=m,t[11]=p,t[12]=i*h+s*_+f*v+n[12],t[13]=o*h+c*_+d*v+n[13],t[14]=r*h+l*_+m*v+n[14],t[15]=a*h+u*_+p*v+n[15]),t}function gt(t,n,e,i){var o=n[0],r=n[1],a=n[2],s=n[3],c=o+o,l=r+r,u=a+a,f=o*c,d=o*l,m=o*u,p=r*l,h=r*u,_=a*u,v=s*c,g=s*l,$=s*u,y=i[0],w=i[1],b=i[2];return t[0]=(1-(p+_))*y,t[1]=(d+$)*y,t[2]=(m-g)*y,t[3]=0,t[4]=(d-$)*w,t[5]=(1-(f+_))*w,t[6]=(h+v)*w,t[7]=0,t[8]=(m+g)*b,t[9]=(h-v)*b,t[10]=(1-(f+p))*b,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function $t(t,n,e,i){var o=n[0],r=n[1],a=n[2],s=i[0],c=i[1],l=i[2],u=o-e[0],f=r-e[1],d=a-e[2],m=u*u+f*f+d*d;m>0&&(u*=m=1/Math.sqrt(m),f*=m,d*=m);var p=c*d-l*f,h=l*u-s*d,_=s*f-c*u;return(m=p*p+h*h+_*_)>0&&(p*=m=1/Math.sqrt(m),h*=m,_*=m),t[0]=p,t[1]=h,t[2]=_,t[3]=0,t[4]=f*_-d*h,t[5]=d*p-u*_,t[6]=u*h-f*p,t[7]=0,t[8]=u,t[9]=f,t[10]=d,t[11]=0,t[12]=o,t[13]=r,t[14]=a,t[15]=1,t}function yt(){var t=new mt(3);return mt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function wt(t,n,e){var i=new mt(3);return i[0]=t,i[1]=n,i[2]=e,i}function bt(t,n){var e=n[0],i=n[1],o=n[2],r=e*e+i*i+o*o;return r>0&&(r=1/Math.sqrt(r)),t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t}function xt(t,n,e){var i=n[0],o=n[1],r=n[2],a=e[0],s=e[1],c=e[2];return t[0]=o*c-r*s,t[1]=r*a-i*c,t[2]=i*s-o*a,t}function Et(t,n,e){var i=n[0],o=n[1],r=n[2],a=e[3]*i+e[7]*o+e[11]*r+e[15];return a=a||1,t[0]=(e[0]*i+e[4]*o+e[8]*r+e[12])/a,t[1]=(e[1]*i+e[5]*o+e[9]*r+e[13])/a,t[2]=(e[2]*i+e[6]*o+e[10]*r+e[14])/a,t}Math.hypot||(Math.hypot=function(){for(var t=0,n=arguments.length;n--;)t+=arguments[n]*arguments[n];return Math.sqrt(t)});var At,Lt=function(t){var n=t[0],e=t[1],i=t[2];return Math.hypot(n,e,i)};At=yt();const Tt=t=>({width:8&t[0],height:16&t[0]}),Ft=t=>({width:t[3],height:t[4]});function It(t){let n;const e=t[12].default,i=l(e,t,t[11],Ft);return{c(){i&&i.c()},m(t,e){i&&i.m(t,e),n=!0},p(t,n){i&&i.p&&2072&n[0]&&f(i,e,t,t[11],n,Tt,Ft)},i(t){n||(j(i,t),n=!0)},o(t){V(i,t),n=!1},d(t){i&&i.d(t)}}}function St(t){let n,e,i,r,a,s=t[2]&&It(t);return{c(){n=v("div"),e=v("canvas"),i=$(),s&&s.c(),w(e,"class","svelte-6pzapg"),w(n,"class","container svelte-6pzapg"),z((()=>t[14].call(n)))},m(o,c){h(o,n,c),p(n,e),t[13](e),p(n,i),s&&s.m(n,null),r=function(t,n){const e=getComputedStyle(t),i=(parseInt(e.zIndex)||0)-1;"static"===e.position&&(t.style.position="relative");const o=v("iframe");o.setAttribute("style",`display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: ${i};`),o.setAttribute("aria-hidden","true"),o.tabIndex=-1;const r=T();let a;return r?(o.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",a=y(window,"message",(t=>{t.source===o.contentWindow&&n()}))):(o.src="about:blank",o.onload=()=>{a=y(o.contentWindow,"resize",n)}),p(t,o),()=>{(r||a&&o.contentWindow)&&a(),_(o)}}(n,t[14].bind(n)),a=!0},p(t,e){t[2]?s?(s.p(t,e),4&e[0]&&j(s,1)):(s=It(t),s.c(),j(s,1),s.m(n,null)):s&&(X={r:0,c:[],p:X},V(s,1,1,(()=>{s=null})),X.r||o(X.c),X=X.p)},i(t){a||(j(s),a=!0)},o(t){V(s),a=!1},d(e){e&&_(n),t[13](null),s&&s.d(),r()}}}function Mt(t){return{subscribe:et(!1,(n=>{if("undefined"!=typeof IntersectionObserver){const e=new IntersectionObserver((e=>{n(function(t){const n=t.getBoundingClientRect();return n.bottom>0&&n.right>0&&n.top<window.innerHeight&&n.left<window.innerWidth}(t))}));return e.observe(t),()=>e.unobserve(t)}if("undefined"!=typeof window){function e(){const{top:e,bottom:i}=t.getBoundingClientRect();n(i>0&&e<window.innerHeight)}return window.addEventListener("scroll",e),window.addEventListener("resize",e),()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}}})).subscribe}}function Rt(e,i,o){let r,a,l,u=t,f=()=>(u(),u=s(b,(t=>o(23,l=t))),b);e.$$.on_destroy.push((()=>u()));let{$$slots:p={},$$scope:h}=i,{background:_=[1,1,1]}=i,{backgroundOpacity:v=1}=i,{fog:g}=i,{pixelRatio:$}=i;const y="fog"in i;let w,b=et(!1);f();let x,E=!1,A=!1,L=()=>{},T={camera_matrix:et(),view:et(),projection:et()};const F="undefined"!=typeof window?()=>{A||(A=!0,requestAnimationFrame(L))}:()=>{},I=et(1);c(e,I,(t=>o(3,r=t)));const O=et(1);c(e,O,(t=>o(4,a=t)));const N=lt(0,F),P={};let G=P;const H={ambient:[],directional:[],point:[]};function z(t){return n=>{t.push(n),F(),M((()=>{const e=t.indexOf(n);~e&&t.splice(e,1),F()}))}}const B=new Map;let Y=!0;const k={defines:[`#define NUM_LIGHTS 2\n#define USE_FOG ${y}\n`].join(""),add_camera:t=>{if(G&&G!==P)throw new Error("A scene can only have one camera");G=t,F(),T.camera_matrix.set(G.matrix),T.projection.set(G.projection),T.view.set(G.view),M((()=>{G=P,F()}))},update_camera:t=>{T.camera_matrix.set(t.matrix),T.view.set(t.view),T.projection.set(t.projection),Y=!0,F()},add_directional_light:z(H.directional),add_point_light:z(H.point),add_ambient_light:z(H.ambient),get_target:t=>(B.has(t)||B.set(t,et(null)),B.get(t)),invalidate:F,...T,width:I,height:O};R(it,k),R(ot,N);const q=((W=pt())[0]=1,W[1]=0,W[2]=0,W[3]=0,W[4]=0,W[5]=1,W[6]=0,W[7]=0,W[8]=0,W[9]=0,W[10]=1,W[11]=0,W[12]=0,W[13]=0,W[14]=0,W[15]=1,W);var W;const X=et(q);R(rt,{get_matrix_world:()=>q,ctm:{subscribe:X.subscribe}}),S((()=>{o(20,k.canvas=w,k),o(2,x=o(20,k.gl=w.getContext("webgl"),k)),f(o(1,b=Mt(w)));["OES_element_index_uint","OES_standard_derivatives"].forEach((t=>{if(!x.getExtension(t))throw new Error("Unsupported extension: "+t)})),L=t=>{if(!G)return;if(V){const t=$||window.devicePixelRatio||1;o(0,w.width=r*t,w),o(0,w.height=a*t,w),x.viewport(0,0,r*t,a*t),V=!1}if(A=!1,!l&&!t)return void o(15,E=!0);o(15,E=!1),x.clearColor(...J,v),x.clear(x.COLOR_BUFFER_BIT|x.DEPTH_BUFFER_BIT),x.enable(x.CULL_FACE),x.enable(x.BLEND);const n=H.ambient.reduce(((t,{color:n,intensity:e})=>[Math.min(t[0]+n[0]*e,1),Math.min(t[1]+n[1]*e,1),Math.min(t[2]+n[2]*e,1)]),new Float32Array([0,0,0]));let e,i={[x.DEPTH_TEST]:null,[x.CULL_FACE]:null};const s=(t,n)=>{i[t]!==n&&(n?x.enable(t):x.disable(t),i[t]=n)};function c({model:t,model_inverse_transpose:i,geometry:o,material:r,depthTest:a,doubleSided:c}){if(r){if(s(x.DEPTH_TEST,!1!==a),s(x.CULL_FACE,!0!==c),x.blendFuncSeparate(x.SRC_ALPHA,x.ONE_MINUS_SRC_ALPHA,x.SRC_ALPHA,x.ONE),r.program!==e){if(e=r.program,x.useProgram(r.program),x.uniform3fv(r.uniform_locations.AMBIENT_LIGHT,n),y&&(x.uniform3fv(r.uniform_locations.FOG_COLOR,J),x.uniform1f(r.uniform_locations.FOG_DENSITY,g)),r.uniform_locations.DIRECTIONAL_LIGHTS)for(let t=0;t<8;t+=1){const n=H.directional[t];if(!n)break;x.uniform3fv(r.uniform_locations.DIRECTIONAL_LIGHTS[t].direction,n.direction),x.uniform3fv(r.uniform_locations.DIRECTIONAL_LIGHTS[t].color,n.color),x.uniform1f(r.uniform_locations.DIRECTIONAL_LIGHTS[t].intensity,n.intensity)}if(r.uniform_locations.POINT_LIGHTS)for(let t=0;t<8;t+=1){const n=H.point[t];if(!n)break;x.uniform3fv(r.uniform_locations.POINT_LIGHTS[t].location,n.location),x.uniform3fv(r.uniform_locations.POINT_LIGHTS[t].color,n.color),x.uniform1f(r.uniform_locations.POINT_LIGHTS[t].intensity,n.intensity)}x.uniform3fv(r.uniform_locations.CAMERA_WORLD_POSITION,G.world_position),x.uniformMatrix4fv(r.uniform_locations.VIEW,!1,G.view),x.uniformMatrix4fv(r.uniform_locations.PROJECTION,!1,G.projection)}if(x.uniformMatrix4fv(r.uniform_locations.MODEL,!1,t),x.uniformMatrix4fv(r.uniform_locations.MODEL_INVERSE_TRANSPOSE,!1,i),r.apply_uniforms(x),o.set_attributes(x),o.index)x.bindBuffer(x.ELEMENT_ARRAY_BUFFER,o.buffers.__index),x.drawElements(x[o.primitive],o.index.length,x.UNSIGNED_INT,0);else{const t=x[o.primitive];x.drawArrays(t,0,o.count)}}}!function t(n){n.needs_sort&&(n.child_layers.sort(((t,n)=>t.index-n.index)),n.needs_sort=!1),x.depthMask(!0),x.clearDepth(1),x.clear(x.DEPTH_BUFFER_BIT);for(let t=0;t<n.meshes.length;t+=1)c(n.meshes[t]);x.depthMask(!1),(Y||n.needs_transparency_sort)&&(j(n.transparent_meshes),n.needs_transparency_sort=!1);for(let t=0;t<n.transparent_meshes.length;t+=1)c(n.transparent_meshes[t]);for(let e=0;e<n.child_layers.length;e+=1)t(n.child_layers[e])}(N),Y=!1};const t=setTimeout((()=>{m(I,r=w.clientWidth,r),m(O,a=w.clientHeight,a)}));return(U(),C).then((()=>L(!0))),()=>{x.getExtension("WEBGL_lose_context").loseContext(),clearTimeout(t)}}));const j=t=>{if(t.length<2)return;const n=new Map,e=new Float32Array(16);t.forEach((t=>{const i=_t(e,G.view,t.model)[14];n.set(t,i)})),t.sort(((t,e)=>n.get(t)-n.get(e)))};let V=!0;let J;return e.$$set=t=>{o(39,i=n(n({},i),d(t))),"background"in t&&o(7,_=t.background),"backgroundOpacity"in t&&o(8,v=t.backgroundOpacity),"fog"in t&&o(9,g=t.fog),"pixelRatio"in t&&o(10,$=t.pixelRatio),"$$scope"in t&&o(11,h=t.$$scope)},e.$$.update=()=>{128&e.$$.dirty[0]&&(J=ut(_)),24&e.$$.dirty[0]&&(V=!0,F()),1049472&e.$$.dirty[0]&&k.invalidate(),9469952&e.$$.dirty[0]&&l&&E&&k.invalidate()},i=d(i),[w,b,x,r,a,I,O,_,v,g,$,h,p,function(t){D[t?"unshift":"push"]((()=>{w=t,o(0,w)}))},function(){r=this.clientWidth,I.set(r),a=this.clientHeight,O.set(a)}]}class Ot extends tt{constructor(t){super(),Z(this,t,Rt,St,a,{background:7,backgroundOpacity:8,fog:9,pixelRatio:10},[-1,-1])}}!function(){var t,n=(t=new mt(4),mt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t)}();function Nt(){var t=new mt(4);return mt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Dt(t,n,e,i){var o,r,a,s,c,l=n[0],u=n[1],f=n[2],d=n[3],m=e[0],p=e[1],h=e[2],_=e[3];return(r=l*m+u*p+f*h+d*_)<0&&(r=-r,m=-m,p=-p,h=-h,_=-_),1-r>1e-6?(o=Math.acos(r),a=Math.sin(o),s=Math.sin((1-i)*o)/a,c=Math.sin(i*o)/a):(s=1-i,c=i),t[0]=s*l+c*m,t[1]=s*u+c*p,t[2]=s*f+c*h,t[3]=s*d+c*_,t}function Pt(t,n,e,i){var o=.5*Math.PI/180;n*=o,e*=o,i*=o;var r=Math.sin(n),a=Math.cos(n),s=Math.sin(e),c=Math.cos(e),l=Math.sin(i),u=Math.cos(i);return t[0]=r*c*u-a*s*l,t[1]=a*s*u+r*c*l,t[2]=a*c*l-r*s*u,t[3]=a*c*u+r*s*l,t}var Gt,Ct,Ht,Ut,zt,Bt,Yt,kt=function(t,n){var e=n[0],i=n[1],o=n[2],r=n[3],a=e*e+i*i+o*o+r*r;return a>0&&(a=1/Math.sqrt(a)),t[0]=e*a,t[1]=i*a,t[2]=o*a,t[3]=r*a,t};Gt=yt(),Ct=wt(1,0,0),Ht=wt(0,1,0),Ut=Nt(),zt=Nt(),Bt=new mt(9),mt!=Float32Array&&(Bt[1]=0,Bt[2]=0,Bt[3]=0,Bt[5]=0,Bt[6]=0,Bt[7]=0),Bt[0]=1,Bt[4]=1,Bt[8]=1,Yt=Bt;function qt(t){let n;const e=t[9].default,i=l(e,t,t[8],null);return{c(){i&&i.c()},m(t,e){i&&i.m(t,e),n=!0},p(t,[n]){i&&i.p&&256&n&&f(i,e,t,t[8],n,null,null)},i(t){n||(j(i,t),n=!0)},o(t){V(i,t),n=!1},d(t){i&&i.d(t)}}}function Wt(n,e,i){let o,r,a,l=t;n.$$.on_destroy.push((()=>l()));let{$$slots:u={},$$scope:f}=e,{location:d=[0,0,0]}=e,{lookAt:p}=e,{up:h=[0,1,0]}=e,{rotation:_=[0,0,0]}=e,{scale:v=1}=e;const g=at(),$=st(),{ctm:y}=$;c(n,y,(t=>i(14,r=t)));const w=et(null);c(n,w,(t=>i(15,a=t)));let b=pt(),x=Nt();const E=new Float32Array(b.buffer,48,3);let A,L;return function(t){R(rt,t)}({ctm:w}),n.$$set=t=>{"location"in t&&i(3,d=t.location),"lookAt"in t&&i(4,p=t.lookAt),"up"in t&&i(5,h=t.up),"rotation"in t&&i(6,_=t.rotation),"scale"in t&&i(7,v=t.scale),"$$scope"in t&&i(8,f=t.$$scope)},n.$$.update=()=>{128&n.$$.dirty&&i(12,A="number"==typeof v?[v,v,v]:v),16&n.$$.dirty&&(i(0,L=p?g.get_target(p):et(null)),l(),l=s(L,(t=>i(13,o=t)))),64616&n.$$.dirty&&(o?(vt(b,r,d),$t(b,E,o,h),function(t,n,e){var i=e[0],o=e[1],r=e[2];t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=n[3]*i,t[4]=n[4]*o,t[5]=n[5]*o,t[6]=n[6]*o,t[7]=n[7]*o,t[8]=n[8]*r,t[9]=n[9]*r,t[10]=n[10]*r,t[11]=n[11]*r,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]}(b,b,A),m(w,a=b,a)):(i(11,x=Pt(x||Nt(),..._)),i(10,b=gt(b,x,d,A)),m(w,a=_t(a||pt(),r,b),a))),32768&n.$$.dirty&&g.invalidate()},[L,y,w,d,p,h,_,v,f,u]}class Xt extends tt{constructor(t){super(),Z(this,t,Wt,qt,a,{location:3,lookAt:4,up:5,rotation:6,scale:7})}}const jt=new Map,Vt={5126:(t,n,e)=>t.uniform1f(n,e),35664:(t,n,e)=>t.uniform2fv(n,e),35665:(t,n,e)=>t.uniform3fv(n,e),35666:(t,n,e)=>t.uniform4fv(n,e),35674:(t,n,e)=>t.uniformMatrix2fv(n,!1,e),35675:(t,n,e)=>t.uniformMatrix3fv(n,!1,e),35676:(t,n,e)=>t.uniformMatrix4fv(n,!1,e),35678:(t,n,e)=>{t.activeTexture(t["TEXTURE"+e.index]),t.bindTexture(t.TEXTURE_2D,e.texture),t.uniform1i(n,e.index)}};function Jt(t,n,e){jt.has(t)||jt.set(t,new Map);const i=jt.get(t),o=n+e;if(!i.has(o)){const r=function(t,n,e){const i=t.createProgram();t.attachShader(i,Zt(t,t.VERTEX_SHADER,n,"vertex")),t.attachShader(i,Zt(t,t.FRAGMENT_SHADER,e,"fragment")),t.linkProgram(i);if(!t.getProgramParameter(i,t.LINK_STATUS))throw console.log(t.getProgramInfoLog(i)),new Error("Failed to compile program:\n"+t.getProgramInfoLog(i));return i}(t,n,e),a=function(t,n){const e=[],i=t.getProgramParameter(n,t.ACTIVE_UNIFORMS);for(let o=0;o<i;o+=1){let{size:i,type:r,name:a}=t.getActiveUniform(n,o);const s=t.getUniformLocation(n,a),c=Vt[r];if(!c)throw new Error(`not implemented ${r} (${a})`);e.push({size:i,type:r,name:a,setter:c,loc:s})}return e}(t,r),s=function(t,n){const e=[],i=t.getProgramParameter(n,t.ACTIVE_ATTRIBUTES);for(let o=0;o<i;o+=1){let{size:i,type:r,name:a}=t.getActiveAttrib(n,o);a=a.replace("[0]","");const s=t.getAttribLocation(n,a);e.push({size:i,type:r,name:a,loc:s})}return e}(t,r);i.set(o,{program:r,uniforms:a,attributes:s})}return i.get(o)}function Kt(t,n=4){for(t=String(t);t.length<n;)t=" "+t;return t}function Qt(t,n){let e="";for(;n--;)e+=t;return e}function Zt(t,n,e,i){const o=t.createShader(n);if(t.shaderSource(o,e),t.compileShader(o),t.getShaderParameter(o,t.COMPILE_STATUS))return o;const r=t.getShaderInfoLog(o),a=/ERROR: (\d+):(\d+): (.+)/.exec(r);if(a){const t=+a[1],n=+a[2]-1;console.log("%c"+a[3],"font-weight: bold; color: red");const o=e.split("\n");for(let e=0;e<o.length;e+=1){if(Math.abs(n-e)>5)continue;const i=o[e].replace(/^\t+/gm,(t=>Qt(" ",4*t.length))),r=/^\s+/.exec(i),a=`${Kt(e)}: ${i}`;e===n?(console.log("%c"+a,"font-weight: bold; color: red"),console.log("%c"+(r&&r[0]||"")+Qt(" ",t+6)+"^","color: red")):console.log(a)}throw new Error(`Failed to compile ${i} shader`)}throw new Error(`Failed to compile ${i} shader:\n${r}`)}class tn{constructor(t,n,e,i){this.scene=t;const o=t.gl;this.gl=o;const{program:r,uniforms:a,attributes:s}=Jt(o,t.defines+i+"\n\nprecision highp float;\n#define GLSLIFY 1\nuniform mat4 MODEL;uniform mat4 PROJECTION;uniform mat4 VIEW;uniform mat4 MODEL_INVERSE_TRANSPOSE;uniform vec3 CAMERA_WORLD_POSITION;struct PointLight{vec3 location;vec3 color;float intensity;};uniform PointLight POINT_LIGHTS[NUM_LIGHTS];\n\n"+n,t.defines+i+"\n\n#extension GL_OES_standard_derivatives : enable\nprecision highp float;\n#define GLSLIFY 1\nstruct DirectionalLight{vec3 direction;vec3 color;float intensity;};struct PointLight{vec3 location;vec3 color;float intensity;};uniform vec3 AMBIENT_LIGHT;uniform DirectionalLight DIRECTIONAL_LIGHTS[NUM_LIGHTS];uniform PointLight POINT_LIGHTS[NUM_LIGHTS];\n\n"+e);this.program=r,this.uniforms=a,this.attributes=s,this.uniform_locations={},this.uniforms.forEach((t=>{!function(t,n,e){const i=n.replace(/\]$/,"").split(/\[|\]\.|\./);for(;i.length>1;){const n=i.shift(),e=i[0];t[n]||(t[n]=/^\d+$/.test(e)?[]:{}),t=t[n]}t[i[0]]=e}(this.uniform_locations,t.name,o.getUniformLocation(this.program,t.name))})),this.attribute_locations={},this.attributes.forEach((t=>{this.attribute_locations[t.name]=o.getAttribLocation(this.program,t.name)})),this.raw_values={},this.values={}}set_uniforms(t){let n=0;this.uniforms.forEach((({name:e,type:i,loc:o,setter:r,processor:a})=>{if(e in t){let o=t[e];if(o===this.raw_values[e])return;if(35678===i)return void(this.values[e]={texture:o.instantiate(this.scene)._,index:n++});"number"==typeof o&&5126!==i&&(o=ut(o)),this.values[e]=o}})),this.raw_values=t}apply_uniforms(t,n){this.uniforms.forEach((n=>{n.name in this.values&&n.setter(t,n.loc,this.values[n.name])}))}destroy(){}}var nn="#define GLSLIFY 1\nattribute vec3 position;attribute vec3 normal;varying vec3 v_normal;\n#if defined(has_colormap) || defined(has_specularitymap) || defined(has_normalmap) || defined(has_bumpmap)\n#define has_textures true\n#endif\n#ifdef has_textures\nattribute vec2 uv;varying vec2 v_uv;\n#endif\n#if defined(has_normalmap) || defined(has_bumpmap)\nvarying vec3 v_view_position;\n#endif\nvarying vec3 v_surface_to_light[NUM_LIGHTS];\n#ifdef has_specularity\nvarying vec3 v_surface_to_view[NUM_LIGHTS];\n#endif\n#ifdef USE_FOG\nvarying float v_fog_depth;\n#endif\nvoid main(){vec4 pos=vec4(position,1.0);vec4 model_view_pos=VIEW*MODEL*pos;v_normal=(MODEL_INVERSE_TRANSPOSE*vec4(normal,0.0)).xyz;\n#ifdef has_textures\nv_uv=uv;\n#endif\n#if defined(has_normalmap) || defined(has_bumpmap)\nv_view_position=model_view_pos.xyz;\n#endif\n#ifdef USE_FOG\nv_fog_depth=-model_view_pos.z;\n#endif\nfor(int i=0;i<NUM_LIGHTS;i+=1){PointLight light=POINT_LIGHTS[i];vec3 surface_world_position=(MODEL*pos).xyz;v_surface_to_light[i]=light.location-surface_world_position;\n#ifdef has_specularity\nv_surface_to_view[i]=CAMERA_WORLD_POSITION-surface_world_position;\n#endif\n}gl_Position=PROJECTION*model_view_pos;}",en="#define GLSLIFY 1\n#if defined(has_colormap) || defined(has_specularitymap) || defined(has_normalmap) || defined(has_bumpmap) || defined(has_emissivemap)\n#define has_textures true\n#endif\n#ifdef has_textures\nvarying vec2 v_uv;\n#endif\n#ifdef has_specularity\nuniform float specularity;\n#endif\n#ifdef has_colormap\nuniform sampler2D colormap;\n#endif\n#ifdef has_emissivemap\nuniform sampler2D emissivemap;\n#endif\n#ifdef has_specularitymap\nuniform sampler2D specularitymap;\n#endif\n#ifdef has_bumpmap\nuniform sampler2D bumpmap;vec2 dHdxy_fwd(){vec2 dSTdx=dFdx(v_uv);vec2 dSTdy=dFdy(v_uv);float Hll=texture2D(bumpmap,v_uv).x;float dBx=texture2D(bumpmap,v_uv+dSTdx).x-Hll;float dBy=texture2D(bumpmap,v_uv+dSTdy).x-Hll;\n#ifdef has_bumpscale\nHll*=bumpscale;dBx*=bumpscale;dBy*=bumpscale;\n#endif\nreturn vec2(dBx,dBy);}vec3 perturbNormalArb(vec3 surf_pos,vec3 surface_normal,vec2 dHdxy){vec3 vSigmaX=vec3(dFdx(surf_pos.x),dFdx(surf_pos.y),dFdx(surf_pos.z));vec3 vSigmaY=vec3(dFdy(surf_pos.x),dFdy(surf_pos.y),dFdy(surf_pos.z));vec3 vN=surface_normal;vec3 R1=cross(vSigmaY,vN);vec3 R2=cross(vN,vSigmaX);float fDet=dot(vSigmaX,R1);fDet*=(float(gl_FrontFacing)*2.0-1.0);vec3 vGrad=sign(fDet)*(dHdxy.x*R1+dHdxy.y*R2);return normalize(abs(fDet)*surface_normal-vGrad);}\n#endif\n#ifdef has_bumpscale\nuniform float bumpscale;\n#endif\n#ifdef has_normalmap\nuniform sampler2D normalmap;vec3 perturbNormal2Arb(vec3 eye_pos,vec3 surface_normal){vec3 q0=vec3(dFdx(eye_pos.x),dFdx(eye_pos.y),dFdx(eye_pos.z));vec3 q1=vec3(dFdy(eye_pos.x),dFdy(eye_pos.y),dFdy(eye_pos.z));vec2 st0=dFdx(v_uv.st);vec2 st1=dFdy(v_uv.st);if(length(q0)==0.0){return surface_normal;}float scale=sign(st1.t*st0.s-st0.t*st1.s);vec3 S=normalize((q0*st1.t-q1*st0.t)*scale);vec3 T=normalize((-q0*st1.s+q1*st0.s)*scale);vec3 N=normalize(surface_normal);mat3 tsn=mat3(S,T,N);vec3 mapN=texture2D(normalmap,v_uv).xyz*2.0-1.0;mapN.xy*=(float(gl_FrontFacing)*2.0-1.0);return normalize(tsn*mapN);}\n#endif\n#ifdef has_color\nuniform vec3 color;\n#endif\n#ifdef has_emissive\nuniform vec3 emissive;\n#endif\n#ifdef has_alpha\nuniform float alpha;\n#endif\n#ifdef USE_FOG\nuniform vec3 FOG_COLOR;uniform float FOG_DENSITY;varying float v_fog_depth;\n#endif\nvarying vec3 v_normal;\n#if defined(has_normalmap) || defined(has_bumpmap)\nvarying vec3 v_view_position;\n#endif\nvarying vec3 v_surface_to_light[NUM_LIGHTS];varying vec3 v_surface_to_view[NUM_LIGHTS];void main(){vec3 normal=normalize(v_normal);\n#ifdef has_bumpmap\nnormal=perturbNormalArb(-v_view_position,normal,dHdxy_fwd());\n#elif defined(has_normalmap)\nnormal=perturbNormal2Arb(-v_view_position,normal);\n#endif\nvec3 lighting=vec3(0.0);vec3 spec_amount=vec3(0.0);for(int i=0;i<NUM_LIGHTS;i+=1){DirectionalLight light=DIRECTIONAL_LIGHTS[i];float multiplier=clamp(dot(normal,-light.direction),0.0,1.0);lighting+=multiplier*light.color*light.intensity;}for(int i=0;i<NUM_LIGHTS;i+=1){PointLight light=POINT_LIGHTS[i];vec3 surface_to_light=normalize(v_surface_to_light[i]);float multiplier=clamp(dot(normal,surface_to_light),0.0,1.0);lighting+=multiplier*light.color*light.intensity;\n#ifdef has_specularity\nvec3 surface_to_view=normalize(v_surface_to_view[i]);vec3 half_vector=normalize(surface_to_light+surface_to_view);float spec=clamp(dot(normal,half_vector),0.0,1.0);\n#ifdef has_specularitymap\nspec*=texture2D(specularitymap,v_uv).r;\n#endif\nspec_amount+=specularity*spec*light.color*light.intensity;\n#endif\n}\n#if defined(has_colormap)\ngl_FragColor=texture2D(colormap,v_uv);\n#elif defined(has_color)\ngl_FragColor=vec4(color,1.0);\n#endif\n#ifdef has_alpha\ngl_FragColor.a*=alpha;\n#endif\ngl_FragColor.rgb*=mix(AMBIENT_LIGHT,vec3(1.0,1.0,1.0),lighting);gl_FragColor.rgb+=spec_amount;\n#if defined(has_emissivemap)\ngl_FragColor.rgb+=texture2D(emissivemap,v_uv);\n#elif defined(has_emissive)\ngl_FragColor.rgb+=emissive;\n#endif\n#ifdef USE_FOG\ngl_FragColor.rgb=mix(gl_FragColor.rgb,FOG_COLOR,1.0-exp(-FOG_DENSITY*FOG_DENSITY*v_fog_depth*v_fog_depth));\n#endif\n}";function on(t,n,e){let i,{location:o=[0,0,0]}=n,{rotation:r=[0,0,0]}=n,{scale:a=1}=n,{geometry:s}=n,{vert:l=nn}=n,{frag:u=en}=n,{uniforms:f={}}=n,{depthTest:d}=n,{doubleSided:m}=n,{transparent:p=!1}=n;const h=at(),_=O(ot),{ctm:v}=st();c(t,v,(t=>e(18,i=t)));pt();const g=pt(),$={};let y=!0;let w,b,x,E,A,L,T;return M((()=>{$.material&&$.material.destroy()})),t.$$set=t=>{"location"in t&&e(1,o=t.location),"rotation"in t&&e(2,r=t.rotation),"scale"in t&&e(3,a=t.scale),"geometry"in t&&e(4,s=t.geometry),"vert"in t&&e(5,l=t.vert),"frag"in t&&e(6,u=t.frag),"uniforms"in t&&e(7,f=t.uniforms),"depthTest"in t&&e(8,d=t.depthTest),"doubleSided"in t&&e(9,m=t.doubleSided),"transparent"in t&&e(10,p=t.transparent)},t.$$.update=()=>{8&t.$$.dirty&&e(14,w="number"==typeof a?[a,a,a]:a),32772&t.$$.dirty&&e(15,b=Pt(b||Nt(),...r)),114690&t.$$.dirty&&e(16,x=gt(x||pt(),b,o,w)),458752&t.$$.dirty&&e(17,E=_t(E||pt(),i,x)),128&t.$$.dirty&&e(19,A=Object.keys(f).filter((t=>null!=f[t])).map((t=>`#define has_${t} true\n`)).join("")),524384&t.$$.dirty&&e(20,L=new tn(h,l,u,A)),1048704&t.$$.dirty&&L.set_uniforms(f),1048592&t.$$.dirty&&e(21,T=s.instantiate(h,L.program)),131072&t.$$.dirty&&($.model=E),131072&t.$$.dirty&&($.model_inverse_transpose=(ht(g,E),function(t,n){if(t===n){var e=n[1],i=n[2],o=n[3],r=n[6],a=n[7],s=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=e,t[6]=n[9],t[7]=n[13],t[8]=i,t[9]=r,t[11]=n[14],t[12]=o,t[13]=a,t[14]=s}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t}(g,g))),1048576&t.$$.dirty&&($.material=L),2097152&t.$$.dirty&&($.geometry=T),256&t.$$.dirty&&($.depthTest=d),512&t.$$.dirty&&($.doubleSided=m),1024&t.$$.dirty&&($.transparent=p),1024&t.$$.dirty&&(_.add_mesh($,y),y=!1),132096&t.$$.dirty&&p&&(_.needs_transparency_sort=!0),2228352&t.$$.dirty&&h.invalidate()},[v,o,r,a,s,l,u,f,d,m,p]}class rn extends tt{constructor(t){super(),Z(this,t,on,null,a,{location:1,rotation:2,scale:3,geometry:4,vert:5,frag:6,uniforms:7,depthTest:8,doubleSided:9,transparent:10})}}function an(t,n,e){let i,{id:o}=n,{location:r=[0,0,0]}=n;const{get_target:a}=at(),{ctm:s}=st();c(t,s,(t=>e(8,i=t)));let l=pt();const u=new Float32Array(l.buffer,48,3),f=new Float32Array(3);let d,m,p;return t.$$set=t=>{"id"in t&&e(1,o=t.id),"location"in t&&e(2,r=t.location)},t.$$.update=()=>{4&t.$$.dirty&&e(5,d=r[0]),4&t.$$.dirty&&e(6,m=r[1]),4&t.$$.dirty&&e(7,p=r[2]),224&t.$$.dirty&&(e(4,f[0]=d,f),e(4,f[1]=m,f),e(4,f[2]=p,f)),280&t.$$.dirty&&e(3,l=vt(l,i,f)),10&t.$$.dirty&&a(o).set(u)},[s,o,r]}class sn extends tt{constructor(t){super(),Z(this,t,an,null,a,{id:1,location:2})}}function cn(t,n,e){let{color:i=[1,1,1]}=n,{intensity:o=.2}=n;const r=at(),a={};return r.add_ambient_light(a),t.$$set=t=>{"color"in t&&e(0,i=t.color),"intensity"in t&&e(1,o=t.intensity)},t.$$.update=()=>{1&t.$$.dirty&&e(2,a.color=ut(i),a),2&t.$$.dirty&&e(2,a.intensity=o,a),4&t.$$.dirty&&r.invalidate()},[i,o]}class ln extends tt{constructor(t){super(),Z(this,t,cn,null,a,{color:0,intensity:1})}}function un(t,n,e){let i,{direction:o=new Float32Array([-1,-1,-1])}=n,{color:r=new Float32Array([1,1,1])}=n,{intensity:a=1}=n;const s=at(),{ctm:l}=st();c(t,l,(t=>e(6,i=t)));const u={};let f;return s.add_directional_light(u),t.$$set=t=>{"direction"in t&&e(1,o=t.direction),"color"in t&&e(2,r=t.color),"intensity"in t&&e(3,a=t.intensity)},t.$$.update=()=>{98&t.$$.dirty&&e(5,f=Et(f||yt(),o,i)),48&t.$$.dirty&&e(4,u.direction=bt(u.direction||yt(),f),u),4&t.$$.dirty&&e(4,u.color=ut(r),u),8&t.$$.dirty&&e(4,u.intensity=a,u),16&t.$$.dirty&&s.invalidate()},[l,o,r,a]}class fn extends tt{constructor(t){super(),Z(this,t,un,null,a,{direction:1,color:2,intensity:3})}}function dn(t,n,e){let i,{location:o=new Float32Array([-1,-1,-1])}=n,{color:r=new Float32Array([1,1,1])}=n,{intensity:a=1}=n;const s=at(),{ctm:l}=st();c(t,l,(t=>e(5,i=t)));let u={location:yt(),color:null,intensity:null};return s.add_point_light(u),t.$$set=t=>{"location"in t&&e(1,o=t.location),"color"in t&&e(2,r=t.color),"intensity"in t&&e(3,a=t.intensity)},t.$$.update=()=>{50&t.$$.dirty&&e(4,u.location=Et(u.location,o,i),u),4&t.$$.dirty&&e(4,u.color=ut(r),u),8&t.$$.dirty&&e(4,u.intensity=a,u),16&t.$$.dirty&&s.invalidate()},[l,o,r,a]}class mn extends tt{constructor(t){super(),Z(this,t,dn,null,a,{location:1,color:2,intensity:3})}}function pn(t,n,e){return t<n?n:t>e?e:t}function hn(t){let n,e=!1;function i(){t(n),e=!1}return function(t){e||(requestAnimationFrame(i),e=!0),n=t}}const _n=t=>({location:1&t,target:2&t}),vn=t=>({location:t[0],target:t[1]});function gn(t){let n;const e=t[7].default,i=l(e,t,t[6],vn);return{c(){i&&i.c()},m(t,e){i&&i.m(t,e),n=!0},p(t,[n]){i&&i.p&&67&n&&f(i,e,t,t[6],n,_n,vn)},i(t){n||(j(i,t),n=!0)},o(t){V(i,t),n=!1},d(t){i&&i.d(t)}}}const $n=1e-6;function yn(t,n){return Math.sqrt(t*t+n*n)}function wn(t,n,e){let{$$slots:i={},$$scope:o}=n;const r=at();let{location:a=new Float32Array([1,3,5])}=n,{target:s=new Float32Array([0,1,0])}=n,{minDistance:c=0}=n,{maxDistance:l=1/0}=n,{minPolarAngle:u=0}=n,{maxPolarAngle:f=Math.PI}=n;function d(t,n){const i=a[0]-s[0],o=a[1]-s[1],r=a[2]-s[2],c=Math.sqrt(i*i+o*o+r*r);let l=Math.atan2(i,r);l-=t;let d=Math.acos(pn(o/c,-1,1));d=pn(d-n,$n,Math.PI-$n),d=pn(d,u,f);const m=Math.sin(d)*c,p=m*Math.sin(l),h=Math.cos(d)*c,_=m*Math.cos(l);e(0,a[0]=s[0]+p,a),e(0,a[1]=s[1]+h,a),e(0,a[2]=s[2]+_,a)}function m(t,n){const i=a[0]-s[0],o=(a[1],s[1],a[2]-s[2]);{const t=ft([i,o]),r=-t[0]*n,c=-t[1]*n;e(0,a[0]+=r,a),e(0,a[2]+=c,a),e(1,s[0]+=r,s),e(1,s[2]+=c,s)}{const n=ft([-o,i]),r=n[0]*t,c=n[1]*t;e(0,a[0]+=r,a),e(0,a[2]+=c,a),e(1,s[0]+=r,s),e(1,s[2]+=c,s)}}function p(t){let n=a[0]-s[0],i=a[1]-s[1],o=a[2]-s[2];const r=Math.sqrt(n*n+i*i+o*o);n/=t=pn(t,r/l,c?r/c:1/0),i/=t,o/=t,e(0,a[0]=s[0]+n,a),e(0,a[1]=s[1]+i,a),e(0,a[2]=s[2]+o,a)}function h(t){let n=t.clientX,e=t.clientY;const i=hn((t=>{const i=t.clientX,o=t.clientY,r=i-n,a=o-e;t.shiftKey||2===t.which?m(.01*r,.01*a):d(.005*r,.005*a),n=i,e=o}));window.addEventListener("mousemove",i),window.addEventListener("mouseup",(function t(n){window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",t)}))}const _=hn((t=>{p(Math.pow(1.004,t.wheelDeltaY))}));function v(t){t.preventDefault(),_(t)}function g(t){1===t.touches.length&&function(t){t.preventDefault();const n=t.touches[0],e=n.identifier;let i=n.clientX,o=n.clientY;const r=hn((t=>{if(t.touches.length>1)return;const n=t.touches[0];n.identifier===e&&(d(.003*(n.clientX-i),.003*(n.clientY-o)),i=n.clientX,o=n.clientY)}));window.addEventListener("touchmove",r),window.addEventListener("touchend",(function t(n){let i=n.changedTouches.length;for(;i--;)if(n.changedTouches[i].identifier===e)return window.removeEventListener("touchmove",r),void window.removeEventListener("touchend",t)}))}(t),2===t.touches.length&&function(t){t.preventDefault();const n=t.touches[0],e=t.touches[1],i=n.identifier,o=e.identifier;let r=(n.clientX+e.clientX)/2,a=(n.clientY+e.clientY)/2,s=yn(e.clientX-n.clientX,e.clientY-n.clientY);const c=hn((t=>{if(2!==t.touches.length)return void alert(t.touches.length+" touches");const n=t.touches[0],e=t.touches[1];if(n.identifier!==i&&n.identifier!==o)return;if(e.identifier!==i&&e.identifier!==o)return;const c=(n.clientX+e.clientX)/2,l=(n.clientY+e.clientY)/2,u=yn(e.clientX-n.clientX,e.clientY-n.clientY);m(.01*(c-r),.01*(l-a)),p(u/s),r=c,a=l,s=u}));window.addEventListener("touchmove",c),window.addEventListener("touchend",(function t(n){let e=n.changedTouches.length;for(;e--;){const r=n.changedTouches[e];if(r.identifier===i||r.identifier===o)return window.removeEventListener("touchmove",c),void window.removeEventListener("touchend",t)}}))}(t)}return r.canvas.addEventListener("mousedown",h),r.canvas.addEventListener("mousewheel",v),r.canvas.addEventListener("touchstart",g),M((()=>{r.canvas.removeEventListener("mousedown",h),r.canvas.removeEventListener("mousewheel",v),r.canvas.removeEventListener("touchstart",g)})),t.$$set=t=>{"location"in t&&e(0,a=t.location),"target"in t&&e(1,s=t.target),"minDistance"in t&&e(2,c=t.minDistance),"maxDistance"in t&&e(3,l=t.maxDistance),"minPolarAngle"in t&&e(4,u=t.minPolarAngle),"maxPolarAngle"in t&&e(5,f=t.maxPolarAngle),"$$scope"in t&&e(6,o=t.$$scope)},[a,s,c,l,u,f,o,i]}class bn extends tt{constructor(t){super(),Z(this,t,wn,gn,a,{location:0,target:1,minDistance:2,maxDistance:3,minPolarAngle:4,maxPolarAngle:5})}}function xn(n,e,i){let o,r,a,l,u=t,f=()=>(u(),u=s(T,(t=>i(12,r=t))),T);n.$$.on_destroy.push((()=>u()));let{location:d=[0,0,0]}=e,{lookAt:m=null}=e,{up:p=[0,1,0]}=e,{fov:h=60}=e,{near:_=1}=e,{far:v=2e4}=e;const{add_camera:g,update_camera:$,width:y,height:w,get_target:b}=at();c(n,y,(t=>i(13,a=t))),c(n,w,(t=>i(14,l=t)));const{ctm:x}=st();c(n,x,(t=>i(11,o=t)));const E=pt(),A=new Float32Array(E.buffer,48,3);let L={matrix:E,world_position:A,view:pt(),projection:pt()},T=et(null);return f(),g(L),n.$$set=t=>{"location"in t&&i(4,d=t.location),"lookAt"in t&&i(5,m=t.lookAt),"up"in t&&i(6,p=t.up),"fov"in t&&i(7,h=t.fov),"near"in t&&i(8,_=t.near),"far"in t&&i(9,v=t.far)},n.$$.update=()=>{33&n.$$.dirty&&("string"==typeof m?f(i(0,T=b(m))):T.set(m)),7248&n.$$.dirty&&i(10,L.matrix=(vt(L.matrix,o,d),r&&$t(L.matrix,A,r,p),L.matrix),L),1024&n.$$.dirty&&i(10,L.view=ht(L.view,L.matrix),L),26496&n.$$.dirty&&i(10,L.projection=function(t,n,e,i,o){var r,a=1/Math.tan(n/2);return t[0]=a/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(r=1/(i-o),t[10]=(o+i)*r,t[14]=2*o*i*r):(t[10]=-1,t[14]=-2*i),t}(L.projection,h/180*Math.PI,a/l,_,v),L),1024&n.$$.dirty&&$(L)},[T,y,w,x,d,m,p,h,_,v]}class En extends tt{constructor(t){super(),Z(this,t,xn,null,a,{location:4,lookAt:5,up:6,fov:7,near:8,far:9})}}class An{constructor(t,n,e,i,o,r){this.scene=t;const a=t.gl;this.attributes=e,this.index=i,this.primitive=o,this.count=r,this.locations={},this.buffers={};for(const t in e){const i=e[t];this.locations[t]=a.getAttribLocation(n,t);const o=a.createBuffer();this.buffers[t]=o,a.bindBuffer(a.ARRAY_BUFFER,o),a.bufferData(a.ARRAY_BUFFER,i.data,i.dynamic?a.DYNAMIC_DRAW:a.STATIC_DRAW)}if(i){const t=a.createBuffer();this.buffers.__index=t,a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,t),a.bufferData(a.ELEMENT_ARRAY_BUFFER,i,a.STATIC_DRAW)}}set_attributes(t){for(const n in this.attributes){const e=this.attributes[n],i=this.locations[n];if(i<0)continue;const{size:o=3,type:r=t.FLOAT,normalized:a=!1,stride:s=0,offset:c=0}=e,l=this.buffers[n];t.bindBuffer(t.ARRAY_BUFFER,l),t.enableVertexAttribArray(i),t.vertexAttribPointer(i,o,r,a,s,c)}}update(t,n,e){const i=this.scene,{gl:o}=i,r=this.attributes[t],a=this.buffers[t];if(o.bindBuffer(o.ARRAY_BUFFER,a),o.bufferData(o.ARRAY_BUFFER,r.data=n,r.dynamic?o.DYNAMIC_DRAW:o.STATIC_DRAW),this.count=e,e===1/0)throw new Error("GL.Geometry must be instantiated with one or more { data, size } attributes");i.invalidate()}}class Ln{constructor(t={},n={}){this.attributes=t;const{index:e,primitive:i="TRIANGLES"}=n;this.index=e,this.primitive=i.toUpperCase(),this.count=Tn(t),this.instances=new Map}instantiate(t,n){return this.instances.has(n)||this.instances.set(n,new An(t,n,this.attributes,this.index,this.primitive,this.count)),this.instances.get(n)}update(t,n){this.attributes[t].data=n,this.count=Tn(this.attributes),this.instances.forEach((e=>{e.update(t,n,this.count)}))}}function Tn(t){let n=1/0;for(const e in t){const i=t[e].data.length/t[e].size;i<n&&(n=i)}return n}var Fn=dt((()=>{let t=.5,n=-.5;return new Ln({position:{data:new Float32Array([t,t,t,n,t,t,t,n,t,n,n,t,n,t,t,n,t,n,n,n,t,n,n,n,n,t,n,t,t,n,n,n,n,t,n,n,t,t,n,t,t,t,t,n,n,t,n,t,n,t,n,n,t,t,t,t,n,t,t,t,n,n,t,n,n,n,t,n,t,t,n,n]),size:3},normal:{data:new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0]),size:3},uv:{data:new Float32Array([.5,1/4,1/4,1/4,.5,.5,1/4,.5,1/4,1/4,0,1/4,1/4,.5,0,.5,1,1/4,3/4,1/4,1,.5,3/4,.5,3/4,1/4,.5,1/4,3/4,.5,.5,.5,1/4,0,1/4,1/4,.5,0,.5,1/4,1/4,.5,1/4,3/4,.5,.5,.5,3/4]),size:2}},{index:new Uint32Array([0,1,2,3,2,1,4,5,6,7,6,5,8,9,10,11,10,9,12,13,14,15,14,13,16,17,18,19,18,17,20,21,22,23,22,21])})})),In=dt((()=>new Ln({position:{data:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0]),size:3},normal:{data:new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1]),size:3},uv:{data:new Float32Array([1,0,0,0,1,1,0,1]),size:2}},{index:new Uint32Array([0,1,2,3,2,1])})));const Sn=.85065080835204,Mn=.5257311121191336,Rn=new Float32Array([-Mn,+Sn,0,+Mn,+Sn,0,-Mn,-Sn,0,+Mn,-Sn,0,0,-Mn,+Sn,0,+Mn,+Sn,0,-Mn,-Sn,0,+Mn,-Sn,+Sn,0,-Mn,+Sn,0,+Mn,-Sn,0,-Mn,-Sn,0,+Mn]),On=new Uint16Array([0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1]),Nn=(new Ln({position:{data:Rn,size:3},normal:{data:Rn,size:3}},{index:On}),Math.PI),Dn=2*Nn;var Pn=dt((({turns:t=8,bands:n=6,shading:e="smooth"}={})=>"smooth"===e?function(t,n){const e=(t+1)*(n+1),i=2*(n-1)*t,o=new Float32Array(3*e),r=new Float32Array(2*e),a=new Uint32Array(3*i);let s=0,c=0;for(let e=0;e<=t;e+=1){const i=e/t;for(let t=0;t<=n;t+=1){const e=t/n,a=-Math.cos(i*Dn)*Math.sin(e*Nn),l=Math.cos(e*Nn),u=Math.sin(i*Dn)*Math.sin(e*Nn);o[s++]=a,o[s++]=l,o[s++]=u,r[c++]=i,r[c++]=e}}let l=0;for(let e=0;e<t;e+=1){const t=e*(n+1);a[l++]=t+0,a[l++]=t+1,a[l++]=t+n+2;for(let e=1;e<n-1;e+=1)a[l++]=t+e,a[l++]=t+e+1,a[l++]=t+e+n+1,a[l++]=t+e+n+1,a[l++]=t+e+1,a[l++]=t+e+n+2;a[l++]=t+n-1,a[l++]=t+n,a[l++]=t+2*n}return new Ln({position:{data:o,size:3},normal:{data:o,size:3},uv:{data:r,size:2}},{index:a})}(t,n):function(t,n){throw new Error("TODO implement flat geometry")}()));"undefined"!=typeof Blob&&URL.createObjectURL(new Blob(["self.onmessage = e => { self.onmessage = null; eval(e.data); };"],{type:"application/javascript"}))||"undefined"!=typeof window&&window.SVELTE_GL_WORKER_URL;function Gn(t){let n,e;return n=new En({props:{location:t[10],lookAt:"center",near:.01,far:1e3}}),{c(){J(n.$$.fragment)},m(t,i){K(n,t,i),e=!0},p(t,e){const i={};1024&e&&(i.location=t[10]),n.$set(i)},i(t){e||(j(n.$$.fragment,t),e=!0)},o(t){V(n.$$.fragment,t),e=!1},d(t){Q(n,t)}}}function Cn(n){let e,i,o,r;return e=new rn({props:{geometry:Pn({turns:36,bands:36}),location:[0,.2,0],scale:.1,uniforms:{color:16777215,emissive:13421721}}}),o=new mn({props:{location:[0,0,0],color:16777215,intensity:.6}}),{c(){J(e.$$.fragment),i=$(),J(o.$$.fragment)},m(t,n){K(e,t,n),h(t,i,n),K(o,t,n),r=!0},p:t,i(t){r||(j(e.$$.fragment,t),j(o.$$.fragment,t),r=!0)},o(t){V(e.$$.fragment,t),V(o.$$.fragment,t),r=!1},d(t){Q(e,t),t&&_(i),Q(o,t)}}}function Hn(t){let n,e,i,o,r,a,s,c,l,u,f,d,m,p,v,g,y,w;return n=new sn({props:{id:"center",location:[0,t[2]/2,0]}}),i=new bn({props:{maxPolarAngle:Math.PI/2,$$slots:{default:[Gn,({location:t})=>({10:t}),({location:t})=>t?1024:0]},$$scope:{ctx:t}}}),r=new ln({props:{intensity:.3}}),s=new fn({props:{direction:[-1,-1,-1],intensity:.5}}),l=new rn({props:{geometry:In(),location:[0,-.01,0],rotation:[-90,0,0],scale:10,uniforms:{color:16777215}}}),f=new rn({props:{geometry:Fn(),location:[0,t[2]/2,0],rotation:[0,-20,0],scale:[t[1],t[2],t[3]],uniforms:{color:t[5](t[0])}}}),m=new rn({props:{geometry:Pn({turns:36,bands:36}),location:[-.5,.4,1.2],scale:.4,uniforms:{color:1193046,alpha:.9},transparent:!0}}),v=new rn({props:{geometry:Pn({turns:36,bands:36}),location:[-1.4,.6,.2],scale:.6,uniforms:{color:3368516,alpha:.9},transparent:!0}}),y=new Xt({props:{location:[t[4].x,t[4].y,t[4].z],$$slots:{default:[Cn]},$$scope:{ctx:t}}}),{c(){J(n.$$.fragment),e=$(),J(i.$$.fragment),o=$(),J(r.$$.fragment),a=$(),J(s.$$.fragment),c=$(),J(l.$$.fragment),u=$(),J(f.$$.fragment),d=$(),J(m.$$.fragment),p=$(),J(v.$$.fragment),g=$(),J(y.$$.fragment)},m(t,_){K(n,t,_),h(t,e,_),K(i,t,_),h(t,o,_),K(r,t,_),h(t,a,_),K(s,t,_),h(t,c,_),K(l,t,_),h(t,u,_),K(f,t,_),h(t,d,_),K(m,t,_),h(t,p,_),K(v,t,_),h(t,g,_),K(y,t,_),w=!0},p(t,e){const o={};4&e&&(o.location=[0,t[2]/2,0]),n.$set(o);const r={};3072&e&&(r.$$scope={dirty:e,ctx:t}),i.$set(r);const a={};4&e&&(a.location=[0,t[2]/2,0]),14&e&&(a.scale=[t[1],t[2],t[3]]),1&e&&(a.uniforms={color:t[5](t[0])}),f.$set(a);const s={};16&e&&(s.location=[t[4].x,t[4].y,t[4].z]),2048&e&&(s.$$scope={dirty:e,ctx:t}),y.$set(s)},i(t){w||(j(n.$$.fragment,t),j(i.$$.fragment,t),j(r.$$.fragment,t),j(s.$$.fragment,t),j(l.$$.fragment,t),j(f.$$.fragment,t),j(m.$$.fragment,t),j(v.$$.fragment,t),j(y.$$.fragment,t),w=!0)},o(t){V(n.$$.fragment,t),V(i.$$.fragment,t),V(r.$$.fragment,t),V(s.$$.fragment,t),V(l.$$.fragment,t),V(f.$$.fragment,t),V(m.$$.fragment,t),V(v.$$.fragment,t),V(y.$$.fragment,t),w=!1},d(t){Q(n,t),t&&_(e),Q(i,t),t&&_(o),Q(r,t),t&&_(a),Q(s,t),t&&_(c),Q(l,t),t&&_(u),Q(f,t),t&&_(d),Q(m,t),t&&_(p),Q(v,t),t&&_(g),Q(y,t)}}}function Un(t){let n,e,i,r,a,s,c,l,u,f,d,m,b,A,L,T,F,I,S,M,R,O,N,D,P,G,C,H,U,z,B,Y,k,q,W;return n=new Ot({props:{$$slots:{default:[Hn]},$$scope:{ctx:t}}}),{c(){var o,p,h;J(n.$$.fragment),e=$(),i=v("div"),r=v("label"),a=v("input"),s=$(),c=v("label"),l=v("input"),m=g(" width ("),b=g(t[1]),A=g(")"),L=$(),T=v("label"),F=v("input"),R=g(" height ("),O=g(t[2]),N=g(")"),D=$(),P=v("label"),G=v("input"),z=g(" depth ("),B=g(t[3]),Y=g(")"),w(a,"type","color"),o="height",p="40px",a.style.setProperty(o,p,h?"important":""),w(l,"type","range"),w(l,"min",u=.1),w(l,"max",f=5),w(l,"step",d=.1),w(F,"type","range"),w(F,"min",I=.1),w(F,"max",S=5),w(F,"step",M=.1),w(G,"type","range"),w(G,"min",C=.1),w(G,"max",H=5),w(G,"step",U=.1),w(i,"class","controls svelte-py1ens")},m(o,u){K(n,o,u),h(o,e,u),h(o,i,u),p(i,r),p(r,a),E(a,t[0]),p(i,s),p(i,c),p(c,l),E(l,t[1]),p(c,m),p(c,b),p(c,A),p(i,L),p(i,T),p(T,F),E(F,t[2]),p(T,R),p(T,O),p(T,N),p(i,D),p(i,P),p(P,G),E(G,t[3]),p(P,z),p(P,B),p(P,Y),k=!0,q||(W=[y(a,"input",t[6]),y(l,"change",t[7]),y(l,"input",t[7]),y(F,"change",t[8]),y(F,"input",t[8]),y(G,"change",t[9]),y(G,"input",t[9])],q=!0)},p(t,[e]){const i={};2079&e&&(i.$$scope={dirty:e,ctx:t}),n.$set(i),1&e&&E(a,t[0]),2&e&&E(l,t[1]),(!k||2&e)&&x(b,t[1]),4&e&&E(F,t[2]),(!k||4&e)&&x(O,t[2]),8&e&&E(G,t[3]),(!k||8&e)&&x(B,t[3])},i(t){k||(j(n.$$.fragment,t),k=!0)},o(t){V(n.$$.fragment,t),k=!1},d(t){Q(n,t),t&&_(e),t&&_(i),q=!1,o(W)}}}function zn(t,n,e){let{color:i="#ff3e00"}=n,o=1,r=1,a=1;const s={};return S((()=>{let t;const n=()=>{t=requestAnimationFrame(n),e(4,s.x=3*Math.sin(.001*Date.now()),s),e(4,s.y=2.5+2*Math.sin(4e-4*Date.now()),s),e(4,s.z=3*Math.cos(.002*Date.now()),s)};return n(),()=>cancelAnimationFrame(t)})),t.$$set=t=>{"color"in t&&e(0,i=t.color)},[i,o,r,a,s,t=>parseInt(t.slice(1),16),function(){i=this.value,e(0,i)},function(){o=b(this.value),e(1,o)},function(){r=b(this.value),e(2,r)},function(){a=b(this.value),e(3,a)}]}return new class extends tt{constructor(t){super(),Z(this,t,zn,Un,a,{color:0})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
